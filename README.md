
# Инфраструктура SF Diploma в Yandex Cloud с использованием Terraform

## Обзор

Этот проект Terraform используется для развертывания и управления инфраструктурой для SF Diploma в Yandex Cloud. Проект включает в себя создание виртуальной частной сети (VPC), подсетей, инстансов виртуальных машин, настройку сетевого балансировщика нагрузки и DNS записей.

## Модули

Проект состоит из нескольких модулей, каждый из которых отвечает за определенную часть инфраструктуры:

- `network`: Создает VPC и подсеть для развертывания инстансов и балансировщика.
- `instances`: Запускает инстансы виртуальных машин для воркеров, control plane и сервера управления. Инстансы настраиваются с использованием cloud-init.
- `load_balancer`: Создает сетевой балансировщик нагрузки для распределения трафика между инстансами.
- `dns`: Настраивает DNS зону и записи для доступа к инстансам и балансировщику по доменным именам.

## Структура проекта
```hcl
├── README.md
├── init-files
│   ├── cloud-init-cp.yaml
│   ├── cloud-init-srv.yaml
│   └── cloud-init-worker.yaml
├── key.json
├── main.tf
├── modules
│   ├── dns
│   │   ├── README.md
│   │   ├── main.tf
│   │   ├── outputs.tf
│   │   └── variables.tf
│   ├── instances
│   │   ├── README.md
│   │   ├── main.tf
│   │   ├── outputs.tf
│   │   └── variables.tf
│   ├── load_balancer
│   │   ├── README.md
│   │   ├── main.tf
│   │   ├── outputs.tf
│   │   └── variables.tf
│   └── network
│       ├── README.md
│       ├── main.tf
│       ├── outputs.tf
│       └── variables.tf
├── outputs.tf
└── variables.tf
```


## Использование

Для использования проекта необходимо иметь установленный Terraform версии 0.13 или выше. Конфигурация инфраструктуры определяется в файле `main.tf` корневого каталога, где указывается конфигурация провайдера, а также вызовы модулей с передачей в них соответствующих параметров.

1. Инициализируйте Terraform проект:
```bash
terraform init
```
2. Проверьте план развертывания:
```bash
terraform plan
```
3. Примените конфигурацию:
```bash
terraform apply
```

## Конфигурация

-   Все параметры для модулей задаются в `main.tf`. Для настройки параметров следуйте описанию переменных в `README.md` каждого модуля.
-   Для изменения конфигурации модифицируйте значения переменных в блоках вызова модулей в `main.tf`.

## Очистка ресурсов

Для удаления всех ресурсов, созданных с помощью Terraform, выполните:
```bash
terraform destroy
```
## Авторство
Ермолаев Тимофей Владимирович. Специально для дипломного проекта онлайн-школы "SkillFactory" по курсу "DevOps-инженер". 