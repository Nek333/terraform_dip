
`
# Terraform проект для дипломной работы в онлайн школе SkillFactory

## Описание проекта
Данный проект предназначен для развертывания инфраструктуры в облаке Yandex Cloud для дипломной работы в рамках курсов онлайн школы SkillFactory. Проект включает в себя настройку сети, создание виртуальных машин и настройку DNS.

## Структура проекта
Проект состоит из следующих компонентов:
- `README.md` - файл с описанием проекта.
- `init-files/cloud-init.yaml` - файл с пользовательскими метаданными для инициализации инстансов.
- `key.json` - авторизованный ключ доступа к Yandex Cloud.
- `main.tf` - корневой файл Terraform, описывающий провайдера и модули.
- `modules` - директория с модулями Terraform:
  - `dns` - модуль для настройки DNS.
  - `instances` - модуль для создания виртуальных машин.
  - `network` - модуль для настройки сети.
- `outputs.tf` - файл с описанием выходных данных проекта.
- `variables.tf` - файл с описанием переменных проекта.

## Начало работы
### Предварительные требования
- Установленный Terraform версии 0.13 или выше.
- Наличие учетной записи в Yandex Cloud.

### Конфигурация
1. Создайте авторизованный ключ доступа к Yandex Cloud и поместите его в файл `key.json` в корне проекта.
2. Настройте аутентификационные данные в переменных окружения:
   ```
   export YC_TOKEN=$(yc iam create-token)
   export YC_CLOUD_ID=$(yc config get cloud-id)
   export YC_FOLDER_ID=$(yc config get folder-id)
   ```
3. Создайте файл `init-files/cloud-init.yaml` с пользовательскими метаданными для инициализации инстансов.
Пример:
   ```
#cloud-config
users:
  - name: sf-diploma-user
    groups: sudo
    shell: /bin/bash
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    ssh_authorized_keys:
      - ssh-ed25519 AAAAC************gv1M+M10V Mr.Dow@contoso.com
   ```


### Запуск проекта
1. Инициализируйте Terraform:
   ```
   terraform init
   ```
2. Примените конфигурацию для создания сети и инстансов:
   ```
   terraform apply -target=module.instances
   ```
3. Примените конфигурацию для создания DNS зоны и доменных имен для инстансов:
   ```
   terraform apply
   ```

## Важно
После выполнения команд `terraform apply`, вам будут предоставлены выходные данные, такие как IP-адреса виртуальных машин и доменные имена, которые можно использовать для доступа к вашим инстансам.
